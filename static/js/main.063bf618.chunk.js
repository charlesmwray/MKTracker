(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,a){e.exports=a.p+"static/media/banana.b99b8ad2.png"},137:function(e,t,a){e.exports=a.p+"static/media/bell.fef4ae6e.png"},138:function(e,t,a){e.exports=a.p+"static/media/crossing.866816b0.png"},139:function(e,t,a){e.exports=a.p+"static/media/flower.b1b2b376.png"},140:function(e,t,a){e.exports=a.p+"static/media/leaf.c0c3172d.png"},141:function(e,t,a){e.exports=a.p+"static/media/lightning.673806fd.png"},142:function(e,t,a){e.exports=a.p+"static/media/mushroom.7d0b0a51.png"},143:function(e,t,a){e.exports=a.p+"static/media/shell.9e99f361.png"},144:function(e,t,a){e.exports=a.p+"static/media/special.09f43aed.png"},145:function(e,t,a){e.exports=a.p+"static/media/star.63ba072a.png"},146:function(e,t,a){e.exports=a.p+"static/media/triforce.bff35bea.png"},147:function(e,t,a){e.exports=a.p+"static/media/yoshi.2202dd48.png"},155:function(e,t,a){e.exports=a(383)},160:function(e,t,a){},162:function(e,t,a){},383:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(14),o=a.n(r),c=(a(160),a(23)),l=a(24),i=a(26),u=a(25),m=a(27),p=(a(162),a(47)),h=a.n(p);h.a.initializeApp({apiKey:"AIzaSyCUVExBS8-J9U458sNtB95fwzQNBPSl5Rk",authDomain:"mctracker-42d0f.firebaseapp.com",databaseURL:"https://mctracker-42d0f.firebaseio.com",projectId:"mctracker-42d0f",storageBucket:"mctracker-42d0f.appspot.com",messagingSenderId:"218378060918"});var d=new h.a.auth.GoogleAuthProvider,f=h.a.auth(),g=h.a,v=a(387),E=a(385),y=a(210),b=a(391),S=a(32),C=a(136),w=a.n(C),k=a(137),x=a.n(k),I=a(138),O=a.n(I),j=a(139),B=a.n(j),P=a(140),A=a.n(P),U=a(141),N=a.n(U),D=a(142),L=a.n(D),V=a(143),M=a.n(V),z=a(144),R=a.n(z),T=a(145),F=a.n(T),K=a(146),W=a.n(K),J=a(147),G=a.n(J),H=[[L.a,"mushroom"],[B.a,"flower"],[F.a,"star"],[R.a,"special"],[G.a,"yoshi"],[O.a,"crossing"],[M.a,"shell"],[w.a,"banana"],[A.a,"leaf"],[N.a,"lightning"],[W.a,"triforce"],[x.a,"bell"]],Q=a(386),$=a(388),q=a(389),X=a(393),Y=function(e){return e&&e.cups&&e.cups.length?e.cups.map(function(t){return s.a.createElement(E.a,{xs:2,key:t[1],onClick:function(){e.selectCup(t[1])},className:t[1]===e.selectedCup?"cup-row active":"cup-row"},s.a.createElement("img",{src:t[0],alt:t[1]+" cup",className:"cup-image"}))}):"null"},Z=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handlePointsChange=a.handlePointsChange.bind(Object(S.a)(Object(S.a)(a))),a.selectCup=a.selectCup.bind(Object(S.a)(Object(S.a)(a))),a.state={cupValue:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"saveScore",value:function(){var e=g.database().ref("scores/");this.state.pointsValue<=60&&this.state.cupValue&&(e.push({uid:this.props.userInfo.uid,points:this.state.pointsValue,cup:this.state.cupValue,date:(new Date).toDateString(),username:this.props.userInfo.displayName,photoURL:this.props.userInfo.photoURL}),this.props.toggleAddScore())}},{key:"handlePointsChange",value:function(e){this.setState({pointsValue:e.target.value})}},{key:"selectCup",value:function(e){this.setState({cupValue:e})}},{key:"getPointsValidationState",value:function(){var e=parseInt(this.state.pointsValue);return e>60||e<4?"error":null!==e?"success":null}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{style:{margin:"2rem 0"}},s.a.createElement(Q.a,null,s.a.createElement(v.a,null,s.a.createElement(E.a,{xs:12,sm:1},s.a.createElement($.a,{validationState:this.getPointsValidationState()},s.a.createElement(q.a,null,"Points"),s.a.createElement(X.a,{type:"text",value:this.state.prixPoints,placeholder:"",onChange:this.handlePointsChange,bsSize:"large"}))),s.a.createElement(E.a,{xs:12,sm:11},s.a.createElement(v.a,null,s.a.createElement(Y,{selectCup:this.selectCup,selectedCup:this.state.cupValue,cups:H}))),s.a.createElement(E.a,{xs:12,style:{textAlign:"right",marginTop:"2rem"}},s.a.createElement(y.a,{bsStyle:"danger",onClick:function(){e.props.toggleAddScore()},style:{marginRight:"1rem"}},"Cancel"),s.a.createElement(y.a,{bsStyle:"primary",onClick:function(){e.saveScore()}},"Add Score")))))}}]),t}(n.Component),_=function(e){var t=Object.keys(e.scores),a=[],n={};return t.map(function(t){a.push(e.scores[t])}),e.uid&&(a=a.filter(function(t){return t.uid===e.uid})),H.map(function(e){n[e[1]]=a.filter(function(t){return t.cup===e[1]})}),H.map(function(e){var t,a=[];return n[e[1]].map(function(e){a.push(e.points)}),t=a.length?(a.reduce(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseInt(e)+parseInt(t)})/a.length).toFixed(2):"none",s.a.createElement(E.a,{xs:2,key:e[1],className:"cup-row",style:{cursor:"default"}},s.a.createElement("div",{className:"scoreCell"},s.a.createElement("img",{src:[e[0]],alt:e[1]+" cup",className:"cup-image"}),s.a.createElement("span",{className:"score"},t)))})},ee=a(152),te=a(390),ae=a(396),ne=a(394),se=a(395),re=a(392),oe=function(e){return 0===e.length?"...loading":e.scores.map(function(t,a){for(var n=[],r=a>3?"top":"bottom",o=t.scores.slice(Math.max(t.scores.length-10,0))||[],c=0;c<o.length;c++)n.push(o[c]);return s.a.createElement(ae.a,{trigger:["hover","focus"],placement:r,overlay:function(e){var t=e.scores;return s.a.createElement(te.a,{id:"popover-trigger-hover-focus",title:e.username+" score details"},"Top score: ",s.a.createElement("b",null,Math.max.apply(Math,t)),s.a.createElement("br",null),"Games played: ",t.length,s.a.createElement("br",null),"Last 10 scores:",s.a.createElement("ul",null,t.slice(Math.max(t.length-10,0)).reverse().map(function(e,t){return s.a.createElement("li",{key:t},e.replace(/^0+/,""))})))}(t),key:a},s.a.createElement("tr",null,s.a.createElement("th",{scope:"row"},a+1),s.a.createElement("td",null,s.a.createElement("span",{role:"button",onClick:function(){e.showScoresByCup(t.uid,t.username)},style:{color:"#337ab7",textDecoration:"underline"}},t.username),t.date&&s.a.createElement("div",{style:{fontSize:"1.25rem",color:"#999"}},"Last updated: ",t.date)),s.a.createElement("td",null,t.avgScore.toFixed(1)),s.a.createElement("td",null,t.avgLast10.toFixed(1)),s.a.createElement("td",{style:{width:"70px",height:"50px"},className:"hidden-xs"},s.a.createElement(ee.a,{width:200,height:80,data:{labels:n.reverse(),datasets:[{data:o,backgroundColor:"#ff5722"}]},options:{responsive:!0,legend:{display:!1},tooltips:{enabled:!1},scales:{xAxes:[{display:!1}]}}}))))})},ce=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this))).state={scores:[],showScoresByCup:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t=this,a=g.database().ref("scores/");g.database().ref("users/").on("value",function(n){e=n.val(),a.on("value",function(a){var n,s=a.val(),r=Object.keys(s),o=[],c=[],l=[],i=[],u=0;r.forEach(function(e){o.push(s[e])}),o.map(function(t){var a=e[t.uid]?e[t.uid].username:t.username;-1===c.indexOf(t.uid)&&(c.push(t.uid),l.push([a,t.uid]))}),c.map(function(e,t){var a={scores:[],cups:[],avgScore:0,avgLast10:0,username:l[t][0],uid:l[t][1],date:""};o.map(function(e){e.uid===c[t]&&(a.scores.push(e.points),a.cups.push(e.cup),a.date=e.date)}),a.avgScore=a.scores.reduce(function(e,t){return parseInt(e)+parseInt(t)})/a.scores.length,n=a.scores.length>10?10:a.scores.length,u=0;for(var s=0;s<n;s++)u+=parseInt(a.scores[a.scores.length-1-s]);a.avgLast10=u/n,a.avgScore=a.scores.reduce(function(e,t){return parseInt(e)+parseInt(t)})/a.scores.length,a.scores.length>9&&i.push(a)}),t.setState({scores:i.sort(function(e,t){return e.avgScore>t.avgScore?-1:e.avgScore<t.avgScore?1:0})})})})}},{key:"toggleShowScoresByCup",value:function(){this.setState({showScoresByCup:!this.state.showScoresByCup})}},{key:"showScoresByCup",value:function(e,t){this.setState({showScoresByCupUid:e,showScoresByCupUsername:t}),this.toggleShowScoresByCup()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(ne.a,{id:"leaderboard-tabs"},s.a.createElement(se.a,{eventKey:1,title:"Leaderboard"},s.a.createElement("table",{className:"table table-striped",style:{marginTop:"2rem"}},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{scope:"col"},"Rank"),s.a.createElement("th",{scope:"col"},"Player"),s.a.createElement("th",{scope:"col"},"Average Score"),s.a.createElement("th",{scope:"col"},"Last 10"),s.a.createElement("th",{scope:"col",className:"hidden-xs"}))),s.a.createElement("tbody",null,s.a.createElement(oe,{scores:this.state.scores,showScoresByCup:this.showScoresByCup.bind(this)})))),s.a.createElement(se.a,{eventKey:2,title:"Scores By Cup"},s.a.createElement(v.a,null,s.a.createElement(E.a,{xs:12,smOffset:1,sm:10,lgOffset:2,lg:8,style:{marginTop:"2rem"}},s.a.createElement(_,{scores:this.props.scores}))))),s.a.createElement(re.a,{show:this.state.showScoresByCup,bsSize:"large"},s.a.createElement(re.a.Header,null,s.a.createElement(re.a.Title,null,this.state.showScoresByCupUsername+"'s"," average scores")),s.a.createElement(re.a.Body,null,s.a.createElement(v.a,{style:{padding:"2rem"}},s.a.createElement(_,{scores:this.props.scores,uid:this.state.showScoresByCupUid}))),s.a.createElement(re.a.Footer,null,s.a.createElement(y.a,{onClick:function(){e.toggleShowScoresByCup()}},"Close"))))}}]),t}(n.Component),le=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).state={uid:e.uid,username:""},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=g.database().ref("users/"+this.state.uid);t.on("value",function(a){(t=a.val())&&e.setState({username:t.username})})}},{key:"handleUsernameChange",value:function(e){this.setState({username:e.target.value})}},{key:"saveUsername",value:function(){var e=this;g.database().ref("users/"+this.state.uid).set({username:this.state.username}).then(function(){e.props.toggleProfile()})}},{key:"render",value:function(){var e=this;return s.a.createElement(re.a,{show:!0,bsSize:"large","aria-labelledby":"contained-modal-title-lg"},s.a.createElement(re.a.Header,null,s.a.createElement(re.a.Title,{id:"contained-modal-title-lg"},"My Profile")),s.a.createElement(re.a.Body,null,s.a.createElement(v.a,null,s.a.createElement(E.a,{xs:12,lg:4},s.a.createElement("h2",null,"Details"),s.a.createElement($.a,{validationState:null},s.a.createElement(q.a,null,"Username"),s.a.createElement(X.a,{type:"text",value:this.state.username,onChange:function(t){e.handleUsernameChange(t)},bsSize:"large"}))),s.a.createElement(E.a,{xs:12,lg:8},s.a.createElement("h2",null,"Scores by cup"),s.a.createElement(v.a,{style:{padding:"2rem"}},s.a.createElement(_,{scores:this.props.scores,uid:this.props.uid}))))),s.a.createElement(re.a.Footer,null,s.a.createElement(y.a,{onClick:function(){e.props.toggleProfile()}},"Close"),s.a.createElement(y.a,{bsStyle:"primary",onClick:function(){e.saveUsername()}},"Save")))}}]),t}(n.Component),ie=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={userInfo:null,showAddScore:!1,showProfile:!1},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this;!this.state.userInfo&&f.onAuthStateChanged(function(t){t&&e.setUser(t)}),g.database().ref("scores/").on("value",function(t){t&&e.setState({scoresData:t.val()})})}},{key:"login",value:function(){f.signInWithPopup(d)}},{key:"setUser",value:function(e){!this.state.userInfo&&this.setState({userInfo:e})}},{key:"toggleAddScore",value:function(){this.setState({showAddScore:!this.state.showAddScore})}},{key:"toggleProfile",value:function(){this.setState({showProfile:!this.state.showProfile})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App container"},s.a.createElement("header",{className:"App-header"},s.a.createElement(v.a,null,s.a.createElement(E.a,{xs:12,sm:8},s.a.createElement("h1",{"data-attr":"MKTracker"},"MKTracker")),s.a.createElement(E.a,{xs:12,sm:4},!this.state.userInfo&&s.a.createElement(y.a,{bsStyle:"primary",onClick:function(){e.login()}},"Log In"),this.state.userInfo&&s.a.createElement("div",{className:"align-right",style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end"}},s.a.createElement(b.a,null,s.a.createElement(y.a,{bsStyle:"primary",onClick:function(){e.toggleAddScore()}},"Add Score"),s.a.createElement(y.a,{bsStyle:"info",onClick:function(){e.toggleProfile()}},"Profile")),s.a.createElement("img",{style:{margin:"1rem",width:"50px",height:"50px",borderRadius:"50%"},alt:"User's avatar.",src:this.state.userInfo.photoURL}))))),this.state.userInfo&&s.a.createElement("div",null,this.state.showAddScore&&s.a.createElement(Z,{userInfo:this.state.userInfo,toggleAddScore:this.toggleAddScore.bind(this)})),this.state.scoresData&&s.a.createElement(ce,{scores:this.state.scoresData}),this.state.showProfile&&s.a.createElement(le,{uid:this.state.userInfo.uid,scores:this.state.scoresData,toggleProfile:this.toggleProfile.bind(this)}))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(s.a.createElement(ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[155,2,1]]]);
//# sourceMappingURL=main.063bf618.chunk.js.map