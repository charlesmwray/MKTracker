(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){e.exports=a.p+"static/media/banana.b99b8ad2.png"},119:function(e,t,a){e.exports=a.p+"static/media/bell.fef4ae6e.png"},120:function(e,t,a){e.exports=a.p+"static/media/crossing.866816b0.png"},121:function(e,t,a){e.exports=a.p+"static/media/flower.b1b2b376.png"},122:function(e,t,a){e.exports=a.p+"static/media/leaf.c0c3172d.png"},123:function(e,t,a){e.exports=a.p+"static/media/lightning.673806fd.png"},124:function(e,t,a){e.exports=a.p+"static/media/mushroom.7d0b0a51.png"},125:function(e,t,a){e.exports=a.p+"static/media/shell.9e99f361.png"},126:function(e,t,a){e.exports=a.p+"static/media/special.09f43aed.png"},127:function(e,t,a){e.exports=a.p+"static/media/star.63ba072a.png"},128:function(e,t,a){e.exports=a.p+"static/media/triforce.bff35bea.png"},129:function(e,t,a){e.exports=a.p+"static/media/yoshi.2202dd48.png"},139:function(e,t,a){e.exports=a(359)},144:function(e,t,a){},146:function(e,t,a){},163:function(e,t,a){},359:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(13),c=a.n(r),o=(a(144),a(117)),l=a(25),i=a(26),u=a(30),p=a(27),m=a(29),h=(a(146),a(39)),d=a.n(h);d.a.initializeApp({apiKey:"AIzaSyCUVExBS8-J9U458sNtB95fwzQNBPSl5Rk",authDomain:"mctracker-42d0f.firebaseapp.com",databaseURL:"https://mctracker-42d0f.firebaseio.com",projectId:"mctracker-42d0f",storageBucket:"mctracker-42d0f.appspot.com",messagingSenderId:"218378060918"});var f=new d.a.auth.GoogleAuthProvider,g=d.a.auth(),b=d.a,v=a(363),E=a(361),y=a(368),S=a(22),x=(a(163),a(118)),k=a.n(x),C=a(119),w=a.n(C),I=a(120),A=a.n(I),j=a(121),O=a.n(j),V=a(122),P=a.n(V),L=a(123),N=a.n(L),R=a(124),U=a.n(R),B=a(125),M=a.n(B),z=a(126),D=a.n(z),J=a(127),T=a.n(J),W=a(128),F=a.n(W),G=a(129),K=a.n(G),Q=a(362),$=a(369),q=a(364),H=a(366),X=function(e){return e&&e.cups&&e.cups.length?e.cups.map(function(t){return s.a.createElement(E.a,{xs:4,sm:2,key:t[1],onClick:function(){e.selectCup(t[1])},style:{padding:"1rem",borderRadius:"5px",backgroundColor:t[1]===e.selectedCup?"lightskyblue":"transparent",textAlign:"center",cursor:"pointer"}},s.a.createElement("img",{src:t[0],className:"cups"}))}):"null"},Y=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).handlePointsChange=a.handlePointsChange.bind(Object(S.a)(Object(S.a)(a))),a.selectCup=a.selectCup.bind(Object(S.a)(Object(S.a)(a))),a.state={cupValue:null},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"saveScore",value:function(){var e=b.database().ref("scores/");this.state.pointsValue<=60&&this.state.cupValue&&(e.push({uid:this.props.userInfo.uid,points:this.state.pointsValue,cup:this.state.cupValue,date:new Date,username:this.props.userInfo.displayName,photoURL:this.props.userInfo.photoURL}),this.props.toggleAddScore())}},{key:"handlePointsChange",value:function(e){this.setState({pointsValue:e.target.value})}},{key:"selectCup",value:function(e){this.setState({cupValue:e})}},{key:"getPointsValidationState",value:function(){var e=parseInt(this.state.pointsValue);return e>60||e<4?"error":null!==e?"success":null}},{key:"render",value:function(){var e=this;return s.a.createElement("form",{style:{margin:"2rem 0"}},s.a.createElement(Q.a,null,s.a.createElement(v.a,null,s.a.createElement(E.a,{xs:12,sm:1},s.a.createElement($.a,{validationState:this.getPointsValidationState()},s.a.createElement(q.a,null,"Points"),s.a.createElement(H.a,{type:"text",value:this.state.prixPoints,placeholder:"",onChange:this.handlePointsChange,bsSize:"large"}))),s.a.createElement(E.a,{xs:12,sm:11},s.a.createElement(v.a,null,s.a.createElement(X,{selectCup:this.selectCup,selectedCup:this.state.cupValue,cups:[[U.a,"mushroom"],[O.a,"flower"],[T.a,"star"],[D.a,"special"],[K.a,"yoshi"],[A.a,"crossing"]]})),s.a.createElement(v.a,null,s.a.createElement(X,{selectCup:this.selectCup,selectedCup:this.state.cupValue,cups:[[M.a,"shell"],[k.a,"banana"],[P.a,"leaf"],[N.a,"lightning"],[F.a,"triforce"],[w.a,"bell"]]}))),s.a.createElement(E.a,{xs:12,style:{textAlign:"right",marginTop:"2rem"}},s.a.createElement(y.a,{bsStyle:"danger",onClick:function(){e.props.toggleAddScore()},style:{marginRight:"1rem"}},"Cancel"),s.a.createElement(y.a,{bsStyle:"primary",onClick:function(){e.saveScore()}},"Add Score")))))}}]),t}(n.Component),Z=a(135),_=a(365),ee=a(367),te=function(e){return 0===e.length?"...loading":e.scores.map(function(e,t){for(var a=[],n=0;n<e.scores.length;n++)a.push(e.scores[n]);return s.a.createElement(ee.a,{trigger:["hover","focus"],placement:"bottom",overlay:function(e){var t=e.scores;return s.a.createElement(_.a,{id:"popover-trigger-hover-focus",title:e.username+" score details"},"Top score: ",s.a.createElement("b",null,Math.max.apply(Math,t)),s.a.createElement("br",null),"Games played: ",t.length,s.a.createElement("br",null),"Last 10 scores:",s.a.createElement("ul",null,t.slice(Math.max(t.length-10,1)).map(function(e,t){return s.a.createElement("li",{key:t},e.replace(/^0+/,""))})))}(e),key:t},s.a.createElement("tr",null,s.a.createElement("th",{scope:"row"},t+1),s.a.createElement("td",null,e.username),s.a.createElement("td",null,e.avgScore.toFixed(1)),s.a.createElement("td",null,e.avgLast10.toFixed(1)),s.a.createElement("td",{style:{width:"70px",height:"50px"}},s.a.createElement(Z.a,{width:200,height:80,data:{labels:a,datasets:[{label:"All scores",data:e.scores,backgroundColor:"#ff5722"}]},options:{responsive:!0,legend:{display:!1},scales:{xAxes:[{display:!1}]}}}))))})},ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this))).state={scores:[]},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;b.database().ref("scores/").on("value",function(t){var a,n=t.val(),s=Object.keys(n),r=[],c=[],o=[],l=0;s.forEach(function(e){r.push(n[e])}),r.map(function(e){-1===c.indexOf(e.username)&&c.push(e.username)}),c.map(function(e,t){var n={scores:[],cups:[],avgScore:0,avgLast10:0,username:c[t]};r.map(function(e){e.username===c[t]&&(n.scores.push(e.points),n.cups.push(e.cup))}),n.avgScore=n.scores.reduce(function(e,t){return parseInt(e)+parseInt(t)})/n.scores.length,a=n.scores.length>10?10:n.scores.length,l=0;for(t=0;t<a;t++)l+=parseInt(n.scores[n.scores.length-1-t]);n.avgLast10=l/a,n.avgScore=n.scores.reduce(function(e,t){return parseInt(e)+parseInt(t)})/n.scores.length,o.push(n)}),e.setState({scores:o.sort(function(e,t){return e.avgScore>t.avgScore?-1:e.avgScore<t.avgScore?1:0})})})}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{scope:"col"},"Rank"),s.a.createElement("th",{scope:"col"},"Player"),s.a.createElement("th",{scope:"col"},"Score"),s.a.createElement("th",{scope:"col"},"Last 10"))),s.a.createElement("tbody",null,s.a.createElement(te,{scores:this.state.scores}))))}}]),t}(n.Component),ne=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(p.a)(t).call(this))).state=Object(o.a)({userInfo:null,showAddScore:!1},"userInfo",null),e}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;!this.state.userInfo&&g.onAuthStateChanged(function(t){t&&e.setUser(t)})}},{key:"login",value:function(){g.signInWithPopup(f)}},{key:"setUser",value:function(e){!this.state.userInfo&&this.setState({userInfo:e})}},{key:"toggleAddScore",value:function(){this.setState({showAddScore:!this.state.showAddScore})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"App"},s.a.createElement("header",{className:"App-header"},s.a.createElement(v.a,null,s.a.createElement(E.a,{xs:12,sm:8},s.a.createElement("h1",null,"Mario Kart Tracker")),s.a.createElement(E.a,{xs:12,sm:2},!this.state.showAddScore&&s.a.createElement(y.a,{bsStyle:"primary",onClick:function(){e.toggleAddScore()}},"Add Score")),s.a.createElement(E.a,{xs:12,sm:2},!this.state.userInfo&&s.a.createElement(y.a,{bsStyle:"primary",onClick:function(){e.login()}},"Log In"),this.state.userInfo&&s.a.createElement("div",{className:"pull-right"},s.a.createElement("img",{style:{margin:"1rem",width:"50px",height:"50px",borderRadius:"50%"},src:this.state.userInfo.photoURL}))))),this.state.userInfo&&s.a.createElement("div",null,this.state.showAddScore&&s.a.createElement(Y,{userInfo:this.state.userInfo,toggleAddScore:this.toggleAddScore.bind(this)})),s.a.createElement(ae,null)))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(s.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[139,2,1]]]);
//# sourceMappingURL=main.7de335a2.chunk.js.map